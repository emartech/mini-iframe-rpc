!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("mini_iframe_rpc",[],e):"object"==typeof exports?exports.mini_iframe_rpc=e():t.mini_iframe_rpc=e()}("undefined"!=typeof self?self:this,function(){return function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=17)}([function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=Object.prototype.hasOwnProperty;function r(t){return"function"==typeof t}function s(t){return void 0===t}function u(t){return"[object String]"===Object.prototype.toString.call(t)}i.has=function(t,e){return n.call(t,e)},i.defaultCompare=function(t,e){return t<e?-1:t===e?0:1},i.defaultEquals=function(t,e){return t===e},i.defaultToString=function(t){return null===t?"COLLECTION_NULL":s(t)?"COLLECTION_UNDEFINED":u(t)?"$s"+t:"$o"+t.toString()},i.makeString=function(t,e){if(void 0===e&&(e=","),null===t)return"COLLECTION_NULL";if(s(t))return"COLLECTION_UNDEFINED";if(u(t))return t.toString();var n="{",r=!0;for(var o in t)i.has(t,o)&&(r?r=!1:n+=e,n=n+o+":"+t[o]);return n+"}"},i.isFunction=r,i.isUndefined=s,i.isString=u,i.reverseCompareFunction=function(n){return s(n)||!r(n)?function(t,e){return t<e?1:t===e?0:-1}:function(t,e){return-1*n(t,e)}},i.compareToEquals=function(n){return function(t,e){return 0===n(t,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||i.defaultToString}return t.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!i.isUndefined(e))return e.value},t.prototype.setValue=function(t,e){if(!i.isUndefined(t)&&!i.isUndefined(e)){var n,r="$"+this.toStr(t),o=this.table[r];return n=i.isUndefined(o)?void this.nElements++:o.value,this.table[r]={key:t,value:e},n}},t.prototype.remove=function(t){var e="$"+this.toStr(t),n=this.table[e];if(!i.isUndefined(n))return delete this.table[e],this.nElements--,n.value},t.prototype.keys=function(){var t=[];for(var e in this.table)if(i.has(this.table,e)){var n=this.table[e];t.push(n.key)}return t},t.prototype.values=function(){var t=[];for(var e in this.table)if(i.has(this.table,e)){var n=this.table[e];t.push(n.value)}return t},t.prototype.forEach=function(t){for(var e in this.table)if(i.has(this.table,e)){var n=this.table[e];if(!1===t(n.key,n.value))return}},t.prototype.containsKey=function(t){return!i.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var n="{";return this.forEach(function(t,e){n+="\n\t"+t+" : "+e}),n+"\n}"},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(0);function o(t,e,n){for(var r=n||u.defaultEquals,o=t.length,i=0;i<o;i++)if(r(t[i],e))return i;return-1}e.indexOf=o,e.lastIndexOf=function(t,e,n){for(var r=n||u.defaultEquals,o=t.length-1;0<=o;o--)if(r(t[o],e))return o;return-1},e.contains=function(t,e,n){return 0<=o(t,e,n)},e.remove=function(t,e,n){var r=o(t,e,n);return!(r<0||(t.splice(r,1),0))},e.frequency=function(t,e,n){for(var r=n||u.defaultEquals,o=t.length,i=0,s=0;s<o;s++)r(t[s],e)&&i++;return i},e.equals=function(t,e,n){var r=n||u.defaultEquals;if(t.length!==e.length)return!1;for(var o=t.length,i=0;i<o;i++)if(!r(t[i],e[i]))return!1;return!0},e.copy=function(t){return t.concat()},e.swap=function(t,e,n){if(e<0||e>=t.length||n<0||n>=t.length)return!1;var r=t[e];return t[e]=t[n],t[n]=r,!0},e.toString=function(t){return"["+t.toString()+"]"},e.forEach=function(t,e){for(var n=0,r=t;n<r.length;n++)if(!1===e(r[n]))return}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2),r=function(){function r(){this.firstNode=null,this.lastNode=null,this.nElements=0}return r.prototype.add=function(t,e){if(i.isUndefined(e)&&(e=this.nElements),e<0||e>this.nElements||i.isUndefined(t))return!1;var n=this.createNode(t);if(0===this.nElements||null===this.lastNode)this.firstNode=n,this.lastNode=n;else if(e===this.nElements)this.lastNode.next=n,this.lastNode=n;else if(0===e)n.next=this.firstNode,this.firstNode=n;else{var r=this.nodeAtIndex(e-1);if(null==r)return!1;n.next=r.next,r.next=n}return this.nElements++,!0},r.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},r.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},r.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);if(null!==e)return e.element},r.prototype.indexOf=function(t,e){var n=e||i.defaultEquals;if(i.isUndefined(t))return-1;for(var r=this.firstNode,o=0;null!==r;){if(n(r.element,t))return o;o++,r=r.next}return-1},r.prototype.contains=function(t,e){return 0<=this.indexOf(t,e)},r.prototype.remove=function(t,e){var n=e||i.defaultEquals;if(this.nElements<1||i.isUndefined(t))return!1;for(var r=null,o=this.firstNode;null!==o;){if(n(o.element,t))return null==r?(this.firstNode=o.next,o===this.lastNode&&(this.lastNode=null)):(o===this.lastNode?(this.lastNode=r).next=o.next:r.next=o.next,o.next=null),this.nElements--,!0;o=(r=o).next}return!1},r.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},r.prototype.equals=function(t,e){var n=e||i.defaultEquals;return t instanceof r&&(this.size()===t.size()&&this.equalsAux(this.firstNode,t.firstNode,n))},r.prototype.equalsAux=function(t,e,n){for(;null!==t&&null!==e;){if(!n(t.element,e.element))return!1;t=t.next,e=e.next}return!0},r.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements||null===this.firstNode||null===this.lastNode)){var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var n=this.nodeAtIndex(t-1);null===n?(e=this.firstNode.element,this.firstNode=this.firstNode.next):n.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=n),null!==n&&null!==n.next&&(e=n.next.element,n.next=n.next.next)}return this.nElements--,e}},r.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&!1!==t(e.element);)e=e.next},r.prototype.reverse=function(){for(var t=null,e=this.firstNode,n=null;null!==e;)n=e.next,e.next=t,t=e,e=n;n=this.firstNode,this.firstNode=this.lastNode,this.lastNode=n},r.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},r.prototype.size=function(){return this.nElements},r.prototype.isEmpty=function(){return this.nElements<=0},r.prototype.toString=function(){return o.toString(this.toArray())},r.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,n=0;n<t&&null!=e;n++)e=e.next;return e},r.prototype.createNode=function(t){return{element:t,next:null}},r}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2);e.arrays=r;var o=n(10);e.Bag=o.default;var i=n(11);e.BSTree=i.default;var s=n(6);e.BSTreeKV=s.default;var u=n(1);e.Dictionary=u.default;var a=n(8);e.Heap=a.default;var f=n(12);e.LinkedDictionary=f.default;var l=n(3);e.LinkedList=l.default;var h=n(13);e.MultiDictionary=h.default;var c=n(9);e.FactoryDictionary=c.default;var d=n(9);e.DefaultDictionary=d.default;var p=n(7);e.Queue=p.default;var y=n(14);e.PriorityQueue=y.default;var v=n(5);e.Set=v.default;var m=n(15);e.Stack=m.default;var I=n(16);e.MultiRootTree=I.default;var E=n(0);e.util=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(1),s=function(){function t(t){this.dictionary=new i.default(t)}return t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.add=function(t){return!this.contains(t)&&!r.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},t.prototype.intersection=function(e){var n=this;this.forEach(function(t){return e.contains(t)||n.remove(t),!0})},t.prototype.union=function(t){var e=this;t.forEach(function(t){return e.add(t),!0})},t.prototype.difference=function(t){var e=this;t.forEach(function(t){return e.remove(t),!0})},t.prototype.isSubsetOf=function(e){if(this.size()>e.size())return!1;var n=!0;return this.forEach(function(t){return!!e.contains(t)||(n=!1)}),n},t.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},t.prototype.forEach=function(n){this.dictionary.forEach(function(t,e){return n(e)})},t.prototype.toArray=function(){return this.dictionary.values()},t.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.prototype.size=function(){return this.dictionary.size()},t.prototype.clear=function(){this.dictionary.clear()},t.prototype.toString=function(){return o.toString(this.toArray())},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(7),i=function(){function t(t){this.root=null,this.compare=t||r.defaultCompare,this.nElements=0}return t.prototype.add=function(t){return!r.isUndefined(t)&&(null!==this.insertNode(this.createNode(t))&&(this.nElements++,!0))},t.prototype.clear=function(){this.root=null,this.nElements=0},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.size=function(){return this.nElements},t.prototype.contains=function(t){return!r.isUndefined(t)&&null!==this.searchNode(this.root,t)},t.prototype.search=function(t){var e=this.searchNode(this.root,t);if(null!==e)return e.element},t.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null!==e&&(this.removeNode(e),this.nElements--,!0)},t.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},t.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},t.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},t.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},t.prototype.minimum=function(){if(!this.isEmpty()&&null!==this.root)return this.minimumAux(this.root).element},t.prototype.maximum=function(){if(!this.isEmpty()&&null!==this.root)return this.maximumAux(this.root).element},t.prototype.forEach=function(t){this.inorderTraversal(t)},t.prototype.toArray=function(){var e=[];return this.inorderTraversal(function(t){return e.push(t),!0}),e},t.prototype.height=function(){return this.heightAux(this.root)},t.prototype.searchNode=function(t,e){for(var n=1;null!==t&&0!==n;)(n=this.compare(e,t.element))<0?t=t.leftCh:0<n&&(t=t.rightCh);return t},t.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},t.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},t.prototype.inorderTraversalAux=function(t,e,n){null===t||n.stop||(this.inorderTraversalAux(t.leftCh,e,n),n.stop||(n.stop=!1===e(t.element),n.stop||this.inorderTraversalAux(t.rightCh,e,n)))},t.prototype.levelTraversalAux=function(t,e){var n=new o.default;for(null!==t&&n.enqueue(t),t=n.dequeue()||null;null!=t;){if(!1===e(t.element))return;null!==t.leftCh&&n.enqueue(t.leftCh),null!==t.rightCh&&n.enqueue(t.rightCh),t=n.dequeue()||null}},t.prototype.preorderTraversalAux=function(t,e,n){null===t||n.stop||(n.stop=!1===e(t.element),n.stop||(this.preorderTraversalAux(t.leftCh,e,n),n.stop||this.preorderTraversalAux(t.rightCh,e,n)))},t.prototype.postorderTraversalAux=function(t,e,n){null===t||n.stop||(this.postorderTraversalAux(t.leftCh,e,n),n.stop||(this.postorderTraversalAux(t.rightCh,e,n),n.stop||(n.stop=!1===e(t.element))))},t.prototype.minimumAux=function(t){for(;null!=t&&null!==t.leftCh;)t=t.leftCh;return t},t.prototype.maximumAux=function(t){for(;null!=t&&null!==t.rightCh;)t=t.rightCh;return t},t.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},t.prototype.insertNode=function(t){for(var e=null,n=this.root;null!==n;){var r=this.compare(t.element,n.element);if(0===r)return null;n=r<0?(e=n).leftCh:(e=n).rightCh}return null===(t.parent=e)?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},t.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=function(){function t(){this.list=new r.default}return t.prototype.enqueue=function(t){return this.list.add(t)},t.prototype.add=function(t){return this.list.add(t)},t.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},t.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.size()<=0},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(2),i=function(){function t(t){this.data=[],this.compare=t||r.defaultCompare}return t.prototype.leftChildIndex=function(t){return 2*t+1},t.prototype.rightChildIndex=function(t){return 2*t+2},t.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},t.prototype.siftUp=function(t){for(var e=this.parentIndex(t);0<t&&0<this.compare(this.data[e],this.data[t]);)o.swap(this.data,e,t),t=e,e=this.parentIndex(t)},t.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));0<=e&&0<this.compare(this.data[t],this.data[e]);)o.swap(this.data,e,t),t=e,e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},t.prototype.peek=function(){return 0<this.data.length?this.data[0]:void 0},t.prototype.add=function(t){return!r.isUndefined(t)&&(this.data.push(t),this.siftUp(this.data.length-1),!0)},t.prototype.removeRoot=function(){if(0<this.data.length){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),0<this.data.length&&this.siftDown(0),t}},t.prototype.contains=function(t){var e=r.compareToEquals(this.compare);return o.contains(this.data,t,e)},t.prototype.size=function(){return this.data.length},t.prototype.isEmpty=function(){return this.data.length<=0},t.prototype.clear=function(){this.data.length=0},t.prototype.forEach=function(t){o.forEach(this.data,t)},t}();e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=n(0),u=function(r){function t(t,e){var n=r.call(this,e)||this;return n.defaultFactoryFunction=t,n}return o(t,r),t.prototype.setDefault=function(t,e){var n=r.prototype.getValue.call(this,t);return s.isUndefined(n)?(this.setValue(t,e),e):n},t.prototype.getValue=function(t){return this.setDefault(t,this.defaultFactoryFunction())},t}(i.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),i=n(5),s=function(){function t(t){this.toStrF=t||r.defaultToString,this.dictionary=new o.default(this.toStrF),this.nElements=0}return t.prototype.add=function(t,e){if(void 0===e&&(e=1),r.isUndefined(t)||e<=0)return!1;if(this.contains(t))this.dictionary.getValue(t).copies+=e;else{var n={value:t,copies:e};this.dictionary.setValue(t,n)}return this.nElements+=e,!0},t.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.remove=function(t,e){if(void 0===e&&(e=1),r.isUndefined(t)||e<=0)return!1;if(this.contains(t)){var n=this.dictionary.getValue(t);return e>n.copies?this.nElements-=n.copies:this.nElements-=e,n.copies-=e,n.copies<=0&&this.dictionary.remove(t),!0}return!1},t.prototype.toArray=function(){for(var t=[],e=0,n=this.dictionary.values();e<n.length;e++)for(var r=n[e],o=r.value,i=r.copies,s=0;s<i;s++)t.push(o);return t},t.prototype.toSet=function(){for(var t=new i.default(this.toStrF),e=0,n=this.dictionary.values();e<n.length;e++){var r=n[e].value;t.add(r)}return t},t.prototype.forEach=function(i){this.dictionary.forEach(function(t,e){for(var n=e.value,r=e.copies,o=0;o<r;o++)if(!1===i(n))return!1;return!0})},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},t}();e.default=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(n(6).default);e.default=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=n(0),u=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),a=function(){function t(){this.key=null,this.value=null}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}();var f=function(n){function t(t){var e=n.call(this,t)||this;return e.head=new a,e.tail=new a,e.head.next=e.tail,e.tail.prev=e.head,e}return o(t,n),t.prototype.appendToTail=function(t){var e=this.tail.prev;(e.next=t).prev=e,t.next=this.tail,this.tail.prev=t},t.prototype.getLinkedDictionaryPair=function(t){if(!s.isUndefined(t)){var e="$"+this.toStr(t);return this.table[e]}},t.prototype.getValue=function(t){var e=this.getLinkedDictionaryPair(t);if(!s.isUndefined(e))return e.value},t.prototype.remove=function(t){var e=this.getLinkedDictionaryPair(t);if(!s.isUndefined(e))return n.prototype.remove.call(this,t),e.unlink(),e.value},t.prototype.clear=function(){n.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},t.prototype.replace=function(t,e){var n="$"+this.toStr(e.key);e.next=t.next,e.prev=t.prev,this.remove(t.key),(e.prev.next=e).next.prev=e,this.table[n]=e,++this.nElements},t.prototype.setValue=function(t,e){if(!s.isUndefined(t)&&!s.isUndefined(e)){var n=this.getLinkedDictionaryPair(t),r=new u(t,e),o="$"+this.toStr(t);return s.isUndefined(n)?(this.appendToTail(r),this.table[o]=r,void++this.nElements):(this.replace(n,r),n.value)}},t.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(t)}),n},t.prototype.values=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),n},t.prototype.forEach=function(t){for(var e=this.head.next;null!==e.next;){if(!1===t(e.key,e.value))return;e=e.next}},t}(i.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(1),i=n(2),s=function(){function t(t,e,n){void 0===n&&(n=!1),this.dict=new r.default(t),this.equalsF=e||o.defaultEquals,this.allowDuplicate=n}return t.prototype.getValue=function(t){var e=this.dict.getValue(t);return o.isUndefined(e)?[]:i.copy(e)},t.prototype.setValue=function(t,e){if(o.isUndefined(t)||o.isUndefined(e))return!1;var n=this.dict.getValue(t);return o.isUndefined(n)?(this.dict.setValue(t,[e]),!0):!(!this.allowDuplicate&&i.contains(n,e,this.equalsF))&&(n.push(e),!0)},t.prototype.remove=function(t,e){if(o.isUndefined(e)){var n=this.dict.remove(t);return!o.isUndefined(n)}var r=this.dict.getValue(t);return!(o.isUndefined(r)||!i.remove(r,e,this.equalsF))&&(0===r.length&&this.dict.remove(t),!0)},t.prototype.keys=function(){return this.dict.keys()},t.prototype.values=function(){for(var t=[],e=0,n=this.dict.values();e<n.length;e++)for(var r=0,o=n[e];r<o.length;r++){var i=o[r];t.push(i)}return t},t.prototype.containsKey=function(t){return this.dict.containsKey(t)},t.prototype.clear=function(){this.dict.clear()},t.prototype.size=function(){return this.dict.size()},t.prototype.isEmpty=function(){return this.dict.isEmpty()},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(8),i=function(){function t(t){this.heap=new o.default(r.reverseCompareFunction(t))}return t.prototype.enqueue=function(t){return this.heap.add(t)},t.prototype.add=function(t){return this.heap.add(t)},t.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},t.prototype.peek=function(){return this.heap.peek()},t.prototype.contains=function(t){return this.heap.contains(t)},t.prototype.isEmpty=function(){return this.heap.isEmpty()},t.prototype.size=function(){return this.heap.size()},t.prototype.clear=function(){this.heap.clear()},t.prototype.forEach=function(t){this.heap.forEach(t)},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=function(){function t(){this.list=new r.default}return t.prototype.push=function(t){return this.list.add(t,0)},t.prototype.add=function(t){return this.list.add(t,0)},t.prototype.pop=function(){return this.list.removeElementAtIndex(0)},t.prototype.peek=function(){return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.isEmpty()},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();e.default=o},function(t,e,n){"use strict";var f,r;Object.defineProperty(e,"__esModule",{value:!0}),(r=f||(f={}))[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER",r[r.INSIDE_AT_END=2]="INSIDE_AT_END",r[r.INSIDE_AT_START=3]="INSIDE_AT_START";var o=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.rootIds=t,this.nodes=e,this.initRootIds(),this.initNodes()}return t.prototype.initRootIds=function(){for(var t=0,e=this.rootIds;t<e.length;t++){var n=e[t];this.createEmptyNodeIfNotExist(n)}},t.prototype.initNodes=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var e=0,n=this.nodes[t];e<n.length;e++){var r=n[e];this.createEmptyNodeIfNotExist(r)}},t.prototype.createEmptyNodeIfNotExist=function(t){this.nodes[t]||(this.nodes[t]=[])},t.prototype.getRootIds=function(){return this.rootIds.slice()},t.prototype.getNodes=function(){var t={};for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(t[e]=this.nodes[e].slice());return t},t.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},t.prototype.toObject=function(){return this.getObject()},t.prototype.flatten=function(){for(var e=this,t=[],n=0;n<this.rootIds.length;n++){var r=this.rootIds[n];t.push({id:r,level:0,hasParent:!1,childrenCount:0}),a(r,this.nodes,t,0)}for(var o=0,i=t;o<i.length;o++){var s=i[o];s.childrenCount=u(s.id)}return t;function u(t){return e.nodes[t]?e.nodes[t].length:0}function a(t,e,n,r){if(void 0===r&&(r=0),t&&e&&n&&e[t]){r++;for(var o=e[t],i=0;i<o.length;i++){var s=o[i];n.push({id:s,level:r,hasParent:!0}),a(s,e,n,r)}r--}}},t.prototype.moveIdBeforeId=function(t,e){return this.moveId(t,e,f.BEFORE)},t.prototype.moveIdAfterId=function(t,e){return this.moveId(t,e,f.AFTER)},t.prototype.moveIdIntoId=function(t,e,n){return void 0===n&&(n=!0),n?this.moveId(t,e,f.INSIDE_AT_START):this.moveId(t,e,f.INSIDE_AT_END)},t.prototype.swapRootIdWithRootId=function(t,e){var n=this.findRootId(t),r=this.findRootId(e);this.swapRootPositionWithRootPosition(n,r)},t.prototype.swapRootPositionWithRootPosition=function(t,e){var n=this.rootIds[e];this.rootIds[e]=this.rootIds[t],this.rootIds[t]=n},t.prototype.deleteId=function(t){this.rootDeleteId(t),this.nodeAndSubNodesDelete(t),this.nodeRefrencesDelete(t)},t.prototype.insertIdBeforeId=function(t,e){var n=this.findRootId(t);for(var r in-1<n&&this.insertIdIntoRoot(e,n),this.nodes)if(this.nodes.hasOwnProperty(r)){var o=this.findNodeId(r,t);-1<o&&this.insertIdIntoNode(r,e,o)}},t.prototype.insertIdAfterId=function(t,e){var n=this.findRootId(t);for(var r in-1<n&&this.insertIdIntoRoot(e,n+1),this.nodes)if(this.nodes.hasOwnProperty(r)){var o=this.findNodeId(r,t);-1<o&&this.insertIdIntoNode(r,e,o+1)}},t.prototype.insertIdIntoId=function(t,e){this.nodeInsertAtEnd(t,e),this.nodes[e]=[]},t.prototype.insertIdIntoRoot=function(t,e){if(void 0===e)this.rootInsertAtEnd(t);else if(e<0){var n=this.rootIds.length;this.rootIds.splice(e+n+1,0,t)}else this.rootIds.splice(e,0,t);this.nodes[t]=this.nodes[t]||[]},t.prototype.insertIdIntoNode=function(t,e,n){if(this.nodes[t]=this.nodes[t]||[],this.nodes[e]=this.nodes[e]||[],void 0===n)this.nodeInsertAtEnd(t,e);else if(n<0){var r=this.nodes[t].length;this.nodes[t].splice(n+r+1,0,e)}else this.nodes[t].splice(n,0,e)},t.prototype.moveId=function(t,e,n){var r=t,o=this.findRootId(r);for(var i in this.nodes[e]&&e,this.nodes)if(this.nodes.hasOwnProperty(i)){this.findNodeId(i,e);break}var s=e,u=this.findRootId(s);for(var i in this.nodes[e]&&e,this.nodes)if(this.nodes.hasOwnProperty(i)){this.findNodeId(i,e);break}if(-1<o)if(-1<u)switch(this.rootDelete(o),o<u&&u--,n){case f.BEFORE:this.insertIdIntoRoot(r,u);break;case f.AFTER:this.insertIdIntoRoot(r,u+1);break;case f.INSIDE_AT_START:this.nodeInsertAtStart(s,r);break;case f.INSIDE_AT_END:this.nodeInsertAtEnd(s,r)}else for(var i in this.rootDelete(o),this.nodes){if(this.nodes.hasOwnProperty(i))if(-1<(a=this.findNodeId(i,s))){switch(n){case f.BEFORE:this.insertIdIntoNode(i,r,a);break;case f.AFTER:this.insertIdIntoNode(i,r,a+1);break;case f.INSIDE_AT_START:this.nodeInsertAtStart(s,r);break;case f.INSIDE_AT_END:this.nodeInsertAtEnd(s,r)}break}}else if(-1<u){for(var i in this.nodes){if(this.nodes.hasOwnProperty(i))if(-1<(a=this.findNodeId(i,r))){this.nodeDeleteAtIndex(i,a);break}}switch(n){case f.BEFORE:this.insertIdIntoRoot(r,u);break;case f.AFTER:this.insertIdIntoRoot(r,u+1);break;case f.INSIDE_AT_START:this.nodeInsertAtStart(s,r);break;case f.INSIDE_AT_END:this.nodeInsertAtEnd(s,r)}}else{for(var i in this.nodes){if(this.nodes.hasOwnProperty(i))if(-1<(a=this.findNodeId(i,r))){this.nodeDeleteAtIndex(i,a);break}}for(var i in this.nodes){var a;if(this.nodes.hasOwnProperty(i))if(-1<(a=this.findNodeId(i,s))){switch(n){case f.BEFORE:this.insertIdIntoNode(i,r,a);break;case f.AFTER:this.insertIdIntoNode(i,r,a+1);break;case f.INSIDE_AT_START:this.nodeInsertAtStart(s,r);break;case f.INSIDE_AT_END:this.nodeInsertAtEnd(s,r)}break}}}},t.prototype.swapArrayElements=function(t,e,n){var r=t[e];return t[e]=t[n],t[n]=r,t},t.prototype.rootDeleteId=function(t){var e=this.findRootId(t);-1<e&&this.rootDelete(e)},t.prototype.nodeAndSubNodesDelete=function(t){for(var e=[],n=0;n<this.nodes[t].length;n++){var r=this.nodes[t][n];this.nodeAndSubNodesDelete(r),e.push(t)}this.nodeDelete(t);for(n=0;n<e.length;n++)this.nodeDelete(e[n])},t.prototype.nodeRefrencesDelete=function(t){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var n=0;n<this.nodes[e].length;n++){this.nodes[e][n]===t&&this.nodeDeleteAtIndex(e,n)}},t.prototype.nodeDelete=function(t){delete this.nodes[t]},t.prototype.findRootId=function(t){return this.rootIds.indexOf(t)},t.prototype.findNodeId=function(t,e){return this.nodes[t].indexOf(e)},t.prototype.findNode=function(t){return this.nodes[t]},t.prototype.nodeInsertAtStart=function(t,e){this.nodes[t].unshift(e)},t.prototype.nodeInsertAtEnd=function(t,e){this.nodes[t].push(e)},t.prototype.rootDelete=function(t){this.rootIds.splice(t,1)},t.prototype.nodeDeleteAtIndex=function(t,e){this.nodes[t].splice(e,1)},t.prototype.rootInsertAtStart=function(t){this.rootIds.unshift(t)},t.prototype.rootInsertAtEnd=function(t){this.rootIds.push(t)},t}();e.default=o},function(t,e,n){"use strict";n.r(e);function c(n,r){var o,i,s,t,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var r=n(4);n.d(e,"MiniIframeRPC",function(){return o});var s="iframe-rpc",o=function(){function t(t){var n=this;this.callbacks=new r.Dictionary,this.registeredProcedures=new r.Dictionary,this.recv=function(t){if((n.config.originWhitelist.length<1||-1<n.config.originWhitelist.indexOf(t.origin))&&t.data&&t.data.type===s){var e=t.data.message;return"request"===e.contents?n.respond(e,t.source,t.origin):n.handleResponse(e)}},this.config={windowRef:t&&t.windowRef||window,originWhitelist:t&&t.originWhitelist||[],timeout:t&&t.timeout||0},this.config.windowRef.addEventListener("message",this.recv)}return t.prototype.timeboxPromise=function(t){var n=this;return Promise.race([t,new Promise(function(t,e){n.config.windowRef.setTimeout(function(){return e(new Error("Timeout waiting for RPC response after "+n.config.timeout+" ms"))},n.config.timeout)})])},t.prototype.register=function(t,e){null!=e?this.registeredProcedures.setValue(t,e):this.registeredProcedures.remove(t)},t.prototype.getNextCallId=function(){for(var t=null;!t||this.callbacks.containsKey(t);)t="cb"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,8);return t},t.prototype.sendMessage=function(r,o,i){return new Promise(function(t,e){try{var n={type:s,message:i};r.postMessage(n,o||"*"),t()}catch(t){e(t)}})},t.prototype.invoke=function(t,e,n,r){var o=this,i=this.getNextCallId(),s={contents:"request",callId:i,procedureName:n,argumentList:r||[]},u=this.sendMessage(t,e,s).then(function(){return new Promise(function(e,n){var t={result:function(t){o.callbacks.remove(i),e(t)},exception:function(t){o.callbacks.remove(i),n(new Error(t))}};o.callbacks.setValue(i,t)})});return 0<this.config.timeout&&(u=this.timeboxPromise(u)),u},t.prototype.formatError=function(t){if(!(t instanceof Error))return t;var e=t,n=e.message,r=e.name,o=e.stack;return JSON.stringify({message:n,name:r,stack:o})},t.prototype.respond=function(u,a,f){return i=this,h=function(){var e,n,r,o,i,s=this;return c(this,function(t){if(e=u.callId,n=u.procedureName,r=u.argumentList,o=f&&"null"!==f?f:null,i=function(t){return s.sendMessage(a,o,{contents:"exception",callId:e,exception:s.formatError(t)})},!this.registeredProcedures.containsKey(n))return[2,i("Procedure not found: "+n)];try{return[2,Promise.resolve(this.registeredProcedures.getValue(n).apply({messageBody:u,messageSource:a,messageOrigin:f},r)).then(function(t){return s.sendMessage(a,o,{contents:"result",callId:e,result:t}).catch(i)},i)]}catch(t){return[2,i(t)]}return[2]})},new((l=s=void 0)||(l=Promise))(function(t,e){function n(t){try{o(h.next(t))}catch(t){e(t)}}function r(t){try{o(h.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((h=h.apply(i,s||[])).next())});var i,s,l,h},t.prototype.handleResponse=function(t){var e=this.callbacks.getValue(t.callId);e&&("result"===t.contents?e.result(t.result):"exception"===t.contents&&e.exception(t.exception))},t.prototype.close=function(){this.config.windowRef.removeEventListener("message",this.recv)},t}()}])});