<html>
    <head>
        <title>Mini Iframe RPC unit tests</title>
    </head>
    <body>
        <script>
            window.isChild = "child";
            window.miniIframeConfig = {
                'resultCacheCapacity': 2,
                'defaultInvocationOptions': {
                    timeout: 0,
                },
                'eventCallbacks': {
                    'onSend': (targetWindow, targetOrigin, fullMessage) => {
                        // console.log('child send', fullMessage);
                    },
                    'onReceive': (postMessage) => {
                        // console.log('child recv', postMessage.data);
                    },
                    'onResultCacheEviction': (callId, evictedResult) => {
                        // console.log('cache evict', callId);
                        Promise.resolve(evictedResult).then((er) => window.childRPC.invoke(window.parent, null, 'onEvict', [callId, er]));
                    }
                }
            };
        </script>
        <script src="/base/mini-iframe-rpc-iframe.js"></script>
    </body>
</html>
